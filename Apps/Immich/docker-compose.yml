name: immich

services:
  app:
    container_name: immich-server
    image: ghcr.io/immich-app/immich-server:release
    restart: unless-stopped
    volumes:
      - /DATA/Gallery:/usr/src/app/upload
      - /DATA/Downloads:/usr/src/app/external:ro
      - /etc/localtime:/etc/localtime:ro
    environment:
      DB_HOSTNAME: immich-server-database
      DB_USERNAME: postgres
      DB_PASSWORD: postgres
      DB_DATABASE_NAME: immich
      REDIS_HOSTNAME: redis
    ports:
      - "2283:2283"
    depends_on:
      - redis
      - database
      - machine-learning
    networks:
      pcs: null

  database:
    container_name: immich-postgres
    image: docker.io/tensorchord/pgvecto-rs:pg14-v0.2.0
    restart: unless-stopped
    environment:
      POSTGRES_PASSWORD: postgres
      POSTGRES_USER: postgres
      POSTGRES_DB: immich
      POSTGRES_INITDB_ARGS: '--data-checksums'
    volumes:
      - /DATA/AppData/$AppID/database:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -d ${POSTGRES_DB} -U ${POSTGRES_USER}"]
      interval: 5s
      timeout: 5s
      retries: 5
    networks:
      pcs: null

  machine-learning:
    container_name: immich-machine-learning
    image: ghcr.io/immich-app/immich-machine-learning:release
    restart: unless-stopped
    volumes:
      - /DATA/AppData/$AppID/model-cache:/cache
    environment:
      REDIS_HOSTNAME: redis
      MACHINE_LEARNING_CACHE_FOLDER: /cache
    networks:
      pcs: null

  redis:
    container_name: immich-redis
    image: docker.io/valkey/valkey:7.2-alpine
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "valkey-cli ping || exit 1"]
      interval: 30s
      timeout: 3s
      retries: 5
    networks:
      pcs: null

networks:
  pcs:
    name: pcs

x-casaos:
  architectures:
    - amd64
    - arm64
  author: self
  category: photos
  description:
    en_us: Immich - A high-performance, self-hosted photo and video backup solution, featuring on-device machine learning, mobile apps, and a beautiful web interface that feels like Google Photos.
    zh_cn: Immich - é«˜æ€§èƒ½çš„è‡ªæ‰˜ç®¡ç…§ç‰‡å’Œè§†é¢‘å¤‡ä»½è§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰è®¾å¤‡ä¸Šæœºå™¨å­¦ä¹ ã€ç§»åŠ¨åº”ç”¨ç¨‹åºå’Œç±»ä¼¼Google Photosçš„ç¾è§‚ç½‘é¡µç•Œé¢ã€‚
    ko_kr: Immich - ê¸°ê¸° ë‚´ ë¨¸ì‹  ëŸ¬ë‹, ëª¨ë°”ì¼ ì•± ë° Google í¬í† ì™€ ê°™ì€ ì•„ë¦„ë‹¤ìš´ ì›¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°–ì¶˜ ê³ ì„±ëŠ¥ ì…€í”„ í˜¸ìŠ¤íŒ… ì‚¬ì§„ ë° ë¹„ë””ì˜¤ ë°±ì—… ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.
  icon: https://raw.githubusercontent.com/BookJJun-IJ/AppStore/create/Apps/Immich/icons.png
  screenshot_link:
    - https://raw.githubusercontent.com/BookJJun-IJ/AppStore/create/Apps/Immich/screenshots1.png
    - https://raw.githubusercontent.com/BookJJun-IJ/AppStore/create/Apps/Immich/screenshots2.png
    - https://raw.githubusercontent.com/BookJJun-IJ/AppStore/create/Apps/Immich/screenshots3.png
  index: /
  tagline:
    en_us: Self-hosted photo and video backup solution with Google Photos-like experience
    zh_cn: æä¾›ç±»ä¼¼Google Photosä½“éªŒçš„è‡ªæ‰˜ç®¡ç…§ç‰‡å’Œè§†é¢‘å¤‡ä»½è§£å†³æ–¹æ¡ˆ
    ko_kr: Google í¬í† ì™€ ê°™ì€ ê²½í—˜ì„ ì œê³µí•˜ëŠ” ì…€í”„ í˜¸ìŠ¤íŒ… ì‚¬ì§„ ë° ë¹„ë””ì˜¤ ë°±ì—… ì†”ë£¨ì…˜
  port_map: "2283"
  store_app_id: immich
  title:
    en_us: Immich
    zh_cn: Immich
    ko_kr: Immich
  main: app
  volumes:
    - /DATA/Gallery
    - /DATA/Downloads
    - /DATA/AppData/$AppID/database
    - /DATA/AppData/$AppID/model-cache
  tips:
    en_us: |
      ğŸ“ Folder Structure Guide:
      â€¢ Photo Storage: /DATA/Gallery
      â€¢ Import Photos: /DATA/Downloads
      â€¢ Database: /DATA/AppData/immich/database (Do not modify)
      
      ğŸš€ Getting Started:
      â€¢ First visit: Create admin account at http://YourServerIP:2283
      â€¢ Mobile Apps: Search "Immich" on Play Store / App Store
      â€¢ Web Access: http://localhost:2283
      
      ğŸ’¡ Usage Tips:
      â€¢ Upload via mobile app â†’ Auto-saved to /DATA/Gallery
      â€¢ Copy existing photos to /DATA/Downloads â†’ Use "External Library Scan"
      â€¢ AI features may take time during first scan
      
      âš ï¸ Important:
      â€¢ Never delete database folder
      â€¢ Backup is recommended before major updates

    zh_cn: |
      ğŸ“ æ–‡ä»¶å¤¹ç»“æ„æŒ‡å—ï¼š
      â€¢ ç…§ç‰‡å­˜å‚¨ï¼š/DATA/Gallery
      â€¢ å¯¼å…¥ç…§ç‰‡ï¼š/DATA/Downloads
      â€¢ æ•°æ®åº“ï¼š/DATA/AppData/immich/databaseï¼ˆè¯·å‹¿ä¿®æ”¹ï¼‰
      
      ğŸš€ å…¥é—¨æŒ‡å—ï¼š
      â€¢ é¦–æ¬¡è®¿é—®ï¼šåœ¨ http://æ‚¨çš„æœåŠ¡å™¨IP:2283 åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·
      â€¢ æ‰‹æœºåº”ç”¨ï¼šåœ¨åº”ç”¨å•†åº—æœç´¢"Immich"
      â€¢ ç½‘é¡µè®¿é—®ï¼šhttp://localhost:2283
      
      ğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š
      â€¢ é€šè¿‡æ‰‹æœºåº”ç”¨ä¸Šä¼  â†’ è‡ªåŠ¨ä¿å­˜åˆ° /DATA/Gallery
      â€¢ å°†ç°æœ‰ç…§ç‰‡å¤åˆ¶åˆ° /DATA/Downloads â†’ ä½¿ç”¨"å¤–éƒ¨åº“æ‰«æ"
      â€¢ AIåŠŸèƒ½é¦–æ¬¡æ‰«æå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
      
      âš ï¸ é‡è¦æç¤ºï¼š
      â€¢ åˆ‡å‹¿åˆ é™¤æ•°æ®åº“æ–‡ä»¶å¤¹
      â€¢ å»ºè®®åœ¨é‡å¤§æ›´æ–°å‰è¿›è¡Œå¤‡ä»½

    ko_kr: |
      ğŸ“ í´ë” êµ¬ì¡° ì•ˆë‚´:
      â€¢ ì‚¬ì§„ ì €ì¥ ìœ„ì¹˜: /DATA/Gallery
      â€¢ ì™¸ë¶€ ì‚¬ì§„ ê°€ì ¸ì˜¤ê¸°: /DATA/Downloads
      â€¢ ë°ì´í„°ë² ì´ìŠ¤: /DATA/AppData/immich/database (ìˆ˜ì • ê¸ˆì§€)
      
      ğŸš€ ì‹œì‘í•˜ê¸°:
      â€¢ ì²« ì ‘ì†: http://ì„œë²„IP:2283 ì—ì„œ ê´€ë¦¬ì ê³„ì • ìƒì„±
      â€¢ ëª¨ë°”ì¼ ì•±: Play Store, App Storeì—ì„œ "Immich" ê²€ìƒ‰
      â€¢ ì›¹ ì ‘ì†: http://localhost:2283
      
      ğŸ’¡ ì‚¬ìš© íŒ:
      â€¢ ëª¨ë°”ì¼ ì•±ìœ¼ë¡œ ì—…ë¡œë“œ â†’ /DATA/Galleryì— ìë™ ì €ì¥
      â€¢ ê¸°ì¡´ ì‚¬ì§„ì„ /DATA/Downloadsì— ë³µì‚¬ â†’ "ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìŠ¤ìº”" ì‚¬ìš©
      â€¢ AI ê¸°ëŠ¥ ì²« ìŠ¤ìº” ì‹œ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ìˆ˜ ìˆìŒ
      
      âš ï¸ ì£¼ì˜ì‚¬í•­:
      â€¢ ë°ì´í„°ë² ì´ìŠ¤ í´ë” ì ˆëŒ€ ì‚­ì œ ê¸ˆì§€
      â€¢ ëŒ€ê·œëª¨ ì—…ë°ì´íŠ¸ ì „ ë°±ì—… ê¶Œì¥