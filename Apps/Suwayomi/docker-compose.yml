name: suwayomi

services:
  suwayomi:
    image: ghcr.io/suwayomi/tachidesk:stable
    user: $PUID:$PGID
    container_name: suwayomi
    expose:
      - 80
    environment:
      PUID: $PUID
      PGID: $PGID
      TZ: $TZ
      BIND_IP: 0.0.0.0
      BIND_PORT: 80
      BASIC_AUTH_ENABLED: true
      BASIC_AUTH_USERNAME: admin
      BASIC_AUTH_PASSWORD: $default_pwd
      DOWNLOAD_AS_CBZ: true
      AUTO_DOWNLOAD_CHAPTERS: true
      EXTENSION_REPOS: >-
        ["https://raw.githubusercontent.com/keiyoushi/extensions/repo/index.min.json"]
    volumes:
      - /DATA/AppData/$AppID/data:/home/suwayomi/.local/share/Tachidesk
      - /DATA/Media/Manga:/home/suwayomi/.local/share/Tachidesk/downloads
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '1.0'

  flaresolverr:
    image: ghcr.io/flaresolverr/flaresolverr:latest
    container_name: suwayomi-flaresolverr
    user: $PUID:$PGID
    environment:
      PUID: $PUID
      PGID: $PGID
      TZ: $TZ
      LOG_LEVEL: info
    volumes:
      - /DATA/AppData/$AppID/flaresolverr:/app/data
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'

x-casaos:
  architectures:
    - amd64
    - arm64
  main: suwayomi
  author: Suwayomi Team
  category: Media
  description:
    en_us: |
      Suwayomi is a free and open source manga reader server that runs extensions built for Tachiyomi. 
      
      Features:
      • 1200+ manga sources through Tachiyomi extensions (pre-configured)
      • Web-based reader with mobile optimization  
      • Compatible with Mihon/Tachiyomi mobile apps
      • Automatic chapter downloads and updates
      • Multi-user support with authentication
      • Cloudflare bypass with FlareSolverr
      • OPDS support for external readers
      • Tracking with MyAnimeList, AniList, etc.
      
      Pre-configured Sources: Keiyoushi extension repository is automatically added on startup, providing immediate access to MangaDx, MangaNelo, Mangakakalot, and 1200+ other sources. Adult content sources are available but can be filtered in Settings → Browse → Extension filters.
      
      Content Safety: After installation, go to Settings → Browse to configure content filters and hide adult-rated extensions if desired.
  developer: Suwayomi Project
  icon: https://cdn.jsdelivr.net/gh/Yundera/AppStore@main/Apps/Suwayomi/icon.png
  screenshot: https://cdn.jsdelivr.net/gh/Yundera/AppStore@main/Apps/Suwayomi/screenshot-1.png
  tagline:
    en_us: Self-hosted manga server with 1200+ sources and mobile app support
  title:
    en_us: Suwayomi
  tips:
    before_install:
      en_us: |
        **Default Account**
        | Username | Password       |
        | -------- | -------------- |
        | `admin`  | `$default_pwd` |
        
        **Content Safety Setup**
        1. Extension repository pre-configured - ready to use!
        2. After login: Settings → Browse → Extension filters
        3. Toggle off "Show NSFW sources" to hide adult content
        4. Install only family-friendly sources (MangaDx, MangaNelo, etc.)
  thumbnail: https://cdn.jsdelivr.net/gh/Yundera/AppStore@main/Apps/Suwayomi/thumbnail.png
  index: /
  webui_port: 80